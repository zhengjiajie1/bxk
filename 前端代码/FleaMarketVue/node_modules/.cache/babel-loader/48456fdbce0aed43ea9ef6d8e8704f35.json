{"remainingRequest":"D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\node_modules\\babel-loader\\lib\\index.js!D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\src\\components\\page\\release.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\src\\components\\page\\release.vue","mtime":1702115624000},{"path":"D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\babel.config.js","mtime":1656894958000},{"path":"D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747587511841},{"path":"D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1747587511976},{"path":"D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747587511841},{"path":"D:\\Study\\Java\\北信科二手交易平台\\前端代码\\FleaMarketVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1747587512252}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport AppHead from \"../common/AppHeader.vue\";\nimport AppBody from \"../common/AppPageBody.vue\";\nimport AppFoot from \"../common/AppFoot.vue\";\nimport options from \"../common/country-data.js\";\nexport default {\n  name: \"release\",\n  components: {\n    AppHead: AppHead,\n    AppBody: AppBody,\n    AppFoot: AppFoot\n  },\n  data: function data() {\n    return {\n      imgDialogVisible: false,\n      dialogImageUrl: '',\n      showFileList: true,\n      options: options,\n      selectedOptions: [],\n      options2: [],\n      imgList: [],\n      idleItemInfo: {\n        idleName: '',\n        idleDetails: '',\n        pictureList: '',\n        idlePrice: 0,\n        idlePlace: '',\n        idleLabel: ''\n      }\n    };\n  },\n  methods: {\n    listType: function listType() {\n      var _this = this;\n      this.$api.listType({\n        begin: 0,\n        size: 999\n      }).then(function (res) {\n        for (var i = 0; i < res.data.length; ++i) {\n          _this.options2.push({\n            value: res.data[i].id,\n            label: res.data[i].name\n          });\n        }\n      });\n    },\n    handleChange: function handleChange(value) {\n      console.log(value);\n      this.idleItemInfo.idlePlace = value[1];\n    },\n    fileHandleRemove: function fileHandleRemove(file, fileList) {\n      console.log(file, fileList);\n      for (var i = 0; i < this.imgList.length; i++) {\n        if (this.imgList[i] === file.response.data) {\n          this.imgList.splice(i, 1);\n        }\n      }\n    },\n    fileHandlePreview: function fileHandlePreview(file) {\n      console.log(file);\n      this.dialogImageUrl = file.response.data;\n      this.imgDialogVisible = true;\n    },\n    fileHandleSuccess: function fileHandleSuccess(response, file, fileList) {\n      console.log(\"file:\", response, file, fileList);\n      this.imgList.push(response.data);\n    },\n    releaseButton: function releaseButton() {\n      var _this2 = this;\n      this.idleItemInfo.pictureList = JSON.stringify(this.imgList);\n      console.log(this.idleItemInfo);\n      if (this.idleItemInfo.idleName && this.idleItemInfo.idleDetails && this.idleItemInfo.idlePlace && this.idleItemInfo.idleLabel && this.idleItemInfo.idlePrice) {\n        this.$api.addIdleItem(this.idleItemInfo).then(function (res) {\n          if (res.status_code === 1) {\n            _this2.$message({\n              message: '发布成功！',\n              type: 'success'\n            });\n            console.log(res.data);\n            _this2.$router.replace({\n              path: '/details',\n              query: {\n                id: res.data.id\n              }\n            });\n          } else {\n            _this2.$message.error('发布失败！' + res.msg);\n          }\n        }).catch(function (e) {\n          _this2.$message.error('请填写完整信息');\n        });\n      } else {\n        this.$message.error('请填写完整信息！');\n      }\n    },\n    handleExceed: function handleExceed(files, fileList) {\n      this.$message.warning(\"\\u9650\\u523610\\u5F20\\u56FE\\u7247\\uFF0C\\u672C\\u6B21\\u9009\\u62E9\\u4E86 \".concat(files.length, \" \\u5F20\\u56FE\\uFF0C\\u5171\\u9009\\u62E9\\u4E86 \").concat(files.length + fileList.length, \" \\u5F20\\u56FE\"));\n    }\n  },\n  mounted: function mounted() {\n    this.listType();\n  }\n};",{"version":3,"names":["AppHead","AppBody","AppFoot","options","name","components","data","imgDialogVisible","dialogImageUrl","showFileList","selectedOptions","options2","imgList","idleItemInfo","idleName","idleDetails","pictureList","idlePrice","idlePlace","idleLabel","methods","listType","_this","$api","begin","size","then","res","i","length","push","value","id","label","handleChange","console","log","fileHandleRemove","file","fileList","response","splice","fileHandlePreview","fileHandleSuccess","releaseButton","_this2","JSON","stringify","addIdleItem","status_code","$message","message","type","$router","replace","path","query","error","msg","catch","e","handleExceed","files","warning","concat","mounted"],"sources":["src/components/page/release.vue"],"sourcesContent":["<template>\n    <div>\n        <app-head></app-head>\n        <app-body>\n            <div class=\"release-idle-container\">\n                <div class=\"release-idle-container-title\">物品发布</div>\n                <div class=\"release-idle-container-form\">\n                    <el-input placeholder=\"请输入二手物品名称\" v-model=\"idleItemInfo.idleName\"\n                              maxlength=\"30\"\n                              show-word-limit>\n                    </el-input>\n                    <el-input\n                            class=\"release-idle-detiles-text\"\n                            type=\"textarea\"\n                            autosize\n                            placeholder=\"请输入物品的详细介绍...\"\n                            v-model=\"idleItemInfo.idleDetails\"\n                            maxlength=\"1000\"\n                            show-word-limit>\n                    </el-input>\n                    <div class=\"release-idle-place\">\n                        <div class=\"release-tip\">您的地区</div>\n                        <el-cascader\n                                :options=\"options\"\n                                v-model=\"selectedOptions\"\n                                @change=\"handleChange\"\n                                :separator=\"' '\"\n                                style=\"width: 90%;\"\n                        >\n                        </el-cascader>\n                    </div>\n                    <div style=\"display: flex; justify-content: space-between;\">\n                        <div>\n                            <div class=\"release-tip\">物品类别</div>\n                            <el-select  v-model=\"idleItemInfo.idleLabel\" placeholder=\"请选择类别\">\n                                <el-option\n                                        v-for=\"item in options2\"\n                                        :key=\"item.value\"\n                                        :label=\"item.label\"\n                                        :value=\"item.value\">\n                                </el-option>\n                            </el-select>\n                        </div>\n                        <div style=\"width: 300px;\">\n                            <el-input-number v-model=\"idleItemInfo.idlePrice\" :precision=\"2\" :step=\"10\" :max=\"10000000\">\n                                <div slot=\"prepend\">价格</div>\n                            </el-input-number>\n                        </div>\n\n                    </div>\n                    <div class=\"release-idle-container-picture\">\n                        <div class=\"release-idle-container-picture-title\">上传二手物品照片</div>\n                        <el-upload\n                                action=\"http://localhost:9321/file/\"\n                                :on-preview=\"fileHandlePreview\"\n                                :on-remove=\"fileHandleRemove\"\n                                :on-success=\"fileHandleSuccess\"\n                                :show-file-list=\"showFileList\"\n                                :limit=\"10\"\n                                :on-exceed=\"handleExceed\"\n                                accept=\"image/*\"\n                                drag\n                                multiple>\n                            <i class=\"el-icon-upload\"></i>\n                            <div class=\"el-upload__text\">将图片拖到此处，或<em>点击上传</em></div>\n                        </el-upload>\n                        <div class=\"picture-list\">\n                            <el-image style=\"width: 600px;height:400px; margin-bottom: 2px;\" fit=\"contain\"\n                                      v-for=\"(img,index) in imgList\" :src=\"$store.state.baseApi + img\"\n                                      :preview-src-list=\"imgList\" :key=\"index\"></el-image>\n                        </div>\n                        <el-dialog :visible.sync=\"imgDialogVisible\">\n                            <img width=\"100%\" :src=\"$store.state.baseApi + dialogImageUrl\" alt=\"\">\n                        </el-dialog>\n                    </div>\n                    <div style=\"display: flex;justify-content: center;margin-top: 30px;margin-bottom: 30px;\">\n                        <el-button type=\"primary\" plain @click=\"releaseButton\"> 确认发布</el-button>\n                    </div>\n                </div>\n            </div>\n            <app-foot></app-foot>\n        </app-body>\n    </div>\n</template>\n\n<script>\n    import AppHead from '../common/AppHeader.vue';\n    import AppBody from '../common/AppPageBody.vue'\n    import AppFoot from '../common/AppFoot.vue'\n    import options from '../common/country-data.js'\n\n    export default {\n        name: \"release\",\n        components: {\n            AppHead,\n            AppBody,\n            AppFoot\n        },\n        data() {\n            return {\n                imgDialogVisible:false,\n                dialogImageUrl:'',\n                showFileList:true,\n                options:options,\n                selectedOptions:[],\n                options2: [],\n                imgList:[],\n                idleItemInfo:{\n                    idleName:'',\n                    idleDetails:'',\n                    pictureList:'',\n                    idlePrice:0,\n                    idlePlace:'',\n                    idleLabel:''\n                }\n            };\n        },\n        methods: {\n            listType() {\n                this.$api.listType({begin : 0, size : 999}).then((res) => {\n                    for(var i = 0; i < res.data.length; ++i) {\n\n                        this.options2.push({\n                            value : res.data[i].id,\n                            label : res.data[i].name\n                        })\n                    }\n                })\n            },\n            handleChange(value) {\n                console.log(value);\n                this.idleItemInfo.idlePlace=value[1];\n            },\n            fileHandleRemove(file, fileList) {\n                console.log(file, fileList);\n                for(let i=0;i<this.imgList.length;i++){\n                    if(this.imgList[i]===file.response.data){\n                        this.imgList.splice(i,1);\n                    }\n                }\n            },\n            fileHandlePreview(file) {\n                console.log(file);\n                this.dialogImageUrl=file.response.data;\n                this.imgDialogVisible=true;\n            },\n            fileHandleSuccess(response, file, fileList){\n                console.log(\"file:\",response,file,fileList);\n                this.imgList.push(response.data);\n            },\n            releaseButton(){\n                this.idleItemInfo.pictureList=JSON.stringify(this.imgList);\n                console.log(this.idleItemInfo);\n                if(this.idleItemInfo.idleName&&\n                    this.idleItemInfo.idleDetails&&\n                    this.idleItemInfo.idlePlace&&\n                    this.idleItemInfo.idleLabel&&\n                    this.idleItemInfo.idlePrice){\n                    this.$api.addIdleItem(this.idleItemInfo).then(res=>{\n                        if (res.status_code === 1) {\n                            this.$message({\n                                message: '发布成功！',\n                                type: 'success'\n                            });\n                            console.log(res.data);\n                            this.$router.replace({path: '/details', query: {id: res.data.id}});\n                        } else {\n                            this.$message.error('发布失败！'+res.msg);\n                        }\n                    }).catch(e=>{\n                        this.$message.error('请填写完整信息');\n                    })\n                }else {\n                    this.$message.error('请填写完整信息！');\n                }\n\n            },\n            handleExceed(files, fileList) {\n                this.$message.warning(`限制10张图片，本次选择了 ${files.length} 张图，共选择了 ${files.length + fileList.length} 张图`);\n            },\n        },\n        mounted() {\n            this.listType()\n        }\n    }\n</script>\n\n<style scoped>\n    .release-idle-container {\n        min-height: 85vh;\n    }\n\n    .release-idle-container-title {\n        font-size: 18px;\n        padding: 30px 0;\n        font-weight: 600;\n        width: 100%;\n        text-align: center;\n    }\n\n    .release-idle-container-form {\n        padding: 0 180px;\n    }\n\n    .release-idle-detiles-text {\n        margin: 20px 0;\n    }\n    .release-idle-place{\n        margin-bottom: 15px;\n    }\n    .release-tip{\n        color: #555555;\n        float: left;\n        padding-right: 5px;\n        height: 36px;\n        line-height: 36px;\n        font-size: 14px;\n    }\n    .release-idle-container-picture{\n        width: 500px;\n        height: 400px;\n        margin: 20px 0;\n\n    }\n    .release-idle-container-picture-title{\n        margin: 10px 0;\n        color: #555555;\n        font-size: 14px;\n    }\n    .picture-list {\n        margin: 20px 0;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        height: 100px;\n    }\n</style>"],"mappings":"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"}]}