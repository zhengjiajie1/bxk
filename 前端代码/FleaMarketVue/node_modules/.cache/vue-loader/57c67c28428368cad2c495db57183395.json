{"remainingRequest":"D:\\Study\\Java\\北信科二手交易平台 - 副本\\前端代码\\FleaMarketVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Study\\Java\\北信科二手交易平台 - 副本\\前端代码\\FleaMarketVue\\src\\components\\page\\release.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Study\\Java\\北信科二手交易平台 - 副本\\前端代码\\FleaMarketVue\\src\\components\\page\\release.vue","mtime":1702115624000},{"path":"D:\\Study\\Java\\北信科二手交易平台 - 副本\\前端代码\\FleaMarketVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747587511841},{"path":"D:\\Study\\Java\\北信科二手交易平台 - 副本\\前端代码\\FleaMarketVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1747587511976},{"path":"D:\\Study\\Java\\北信科二手交易平台 - 副本\\前端代码\\FleaMarketVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747587511841},{"path":"D:\\Study\\Java\\北信科二手交易平台 - 副本\\前端代码\\FleaMarketVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1747587512252}],"contextDependencies":[],"result":["\n    import AppHead from '../common/AppHeader.vue';\n    import AppBody from '../common/AppPageBody.vue'\n    import AppFoot from '../common/AppFoot.vue'\n    import options from '../common/country-data.js'\n\n    export default {\n        name: \"release\",\n        components: {\n            AppHead,\n            AppBody,\n            AppFoot\n        },\n        data() {\n            return {\n                imgDialogVisible:false,\n                dialogImageUrl:'',\n                showFileList:true,\n                options:options,\n                selectedOptions:[],\n                options2: [],\n                imgList:[],\n                idleItemInfo:{\n                    idleName:'',\n                    idleDetails:'',\n                    pictureList:'',\n                    idlePrice:0,\n                    idlePlace:'',\n                    idleLabel:''\n                }\n            };\n        },\n        methods: {\n            listType() {\n                this.$api.listType({begin : 0, size : 999}).then((res) => {\n                    for(var i = 0; i < res.data.length; ++i) {\n\n                        this.options2.push({\n                            value : res.data[i].id,\n                            label : res.data[i].name\n                        })\n                    }\n                })\n            },\n            handleChange(value) {\n                console.log(value);\n                this.idleItemInfo.idlePlace=value[1];\n            },\n            fileHandleRemove(file, fileList) {\n                console.log(file, fileList);\n                for(let i=0;i<this.imgList.length;i++){\n                    if(this.imgList[i]===file.response.data){\n                        this.imgList.splice(i,1);\n                    }\n                }\n            },\n            fileHandlePreview(file) {\n                console.log(file);\n                this.dialogImageUrl=file.response.data;\n                this.imgDialogVisible=true;\n            },\n            fileHandleSuccess(response, file, fileList){\n                console.log(\"file:\",response,file,fileList);\n                this.imgList.push(response.data);\n            },\n            releaseButton(){\n                this.idleItemInfo.pictureList=JSON.stringify(this.imgList);\n                console.log(this.idleItemInfo);\n                if(this.idleItemInfo.idleName&&\n                    this.idleItemInfo.idleDetails&&\n                    this.idleItemInfo.idlePlace&&\n                    this.idleItemInfo.idleLabel&&\n                    this.idleItemInfo.idlePrice){\n                    this.$api.addIdleItem(this.idleItemInfo).then(res=>{\n                        if (res.status_code === 1) {\n                            this.$message({\n                                message: '发布成功！',\n                                type: 'success'\n                            });\n                            console.log(res.data);\n                            this.$router.replace({path: '/details', query: {id: res.data.id}});\n                        } else {\n                            this.$message.error('发布失败！'+res.msg);\n                        }\n                    }).catch(e=>{\n                        this.$message.error('请填写完整信息');\n                    })\n                }else {\n                    this.$message.error('请填写完整信息！');\n                }\n\n            },\n            handleExceed(files, fileList) {\n                this.$message.warning(`限制10张图片，本次选择了 ${files.length} 张图，共选择了 ${files.length + fileList.length} 张图`);\n            },\n        },\n        mounted() {\n            this.listType()\n        }\n    }\n",{"version":3,"sources":["release.vue"],"names":[],"mappings":";AAsFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"release.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n    <div>\n        <app-head></app-head>\n        <app-body>\n            <div class=\"release-idle-container\">\n                <div class=\"release-idle-container-title\">物品发布</div>\n                <div class=\"release-idle-container-form\">\n                    <el-input placeholder=\"请输入二手物品名称\" v-model=\"idleItemInfo.idleName\"\n                              maxlength=\"30\"\n                              show-word-limit>\n                    </el-input>\n                    <el-input\n                            class=\"release-idle-detiles-text\"\n                            type=\"textarea\"\n                            autosize\n                            placeholder=\"请输入物品的详细介绍...\"\n                            v-model=\"idleItemInfo.idleDetails\"\n                            maxlength=\"1000\"\n                            show-word-limit>\n                    </el-input>\n                    <div class=\"release-idle-place\">\n                        <div class=\"release-tip\">您的地区</div>\n                        <el-cascader\n                                :options=\"options\"\n                                v-model=\"selectedOptions\"\n                                @change=\"handleChange\"\n                                :separator=\"' '\"\n                                style=\"width: 90%;\"\n                        >\n                        </el-cascader>\n                    </div>\n                    <div style=\"display: flex; justify-content: space-between;\">\n                        <div>\n                            <div class=\"release-tip\">物品类别</div>\n                            <el-select  v-model=\"idleItemInfo.idleLabel\" placeholder=\"请选择类别\">\n                                <el-option\n                                        v-for=\"item in options2\"\n                                        :key=\"item.value\"\n                                        :label=\"item.label\"\n                                        :value=\"item.value\">\n                                </el-option>\n                            </el-select>\n                        </div>\n                        <div style=\"width: 300px;\">\n                            <el-input-number v-model=\"idleItemInfo.idlePrice\" :precision=\"2\" :step=\"10\" :max=\"10000000\">\n                                <div slot=\"prepend\">价格</div>\n                            </el-input-number>\n                        </div>\n\n                    </div>\n                    <div class=\"release-idle-container-picture\">\n                        <div class=\"release-idle-container-picture-title\">上传二手物品照片</div>\n                        <el-upload\n                                action=\"http://localhost:9321/file/\"\n                                :on-preview=\"fileHandlePreview\"\n                                :on-remove=\"fileHandleRemove\"\n                                :on-success=\"fileHandleSuccess\"\n                                :show-file-list=\"showFileList\"\n                                :limit=\"10\"\n                                :on-exceed=\"handleExceed\"\n                                accept=\"image/*\"\n                                drag\n                                multiple>\n                            <i class=\"el-icon-upload\"></i>\n                            <div class=\"el-upload__text\">将图片拖到此处，或<em>点击上传</em></div>\n                        </el-upload>\n                        <div class=\"picture-list\">\n                            <el-image style=\"width: 600px;height:400px; margin-bottom: 2px;\" fit=\"contain\"\n                                      v-for=\"(img,index) in imgList\" :src=\"$store.state.baseApi + img\"\n                                      :preview-src-list=\"imgList\" :key=\"index\"></el-image>\n                        </div>\n                        <el-dialog :visible.sync=\"imgDialogVisible\">\n                            <img width=\"100%\" :src=\"$store.state.baseApi + dialogImageUrl\" alt=\"\">\n                        </el-dialog>\n                    </div>\n                    <div style=\"display: flex;justify-content: center;margin-top: 30px;margin-bottom: 30px;\">\n                        <el-button type=\"primary\" plain @click=\"releaseButton\"> 确认发布</el-button>\n                    </div>\n                </div>\n            </div>\n            <app-foot></app-foot>\n        </app-body>\n    </div>\n</template>\n\n<script>\n    import AppHead from '../common/AppHeader.vue';\n    import AppBody from '../common/AppPageBody.vue'\n    import AppFoot from '../common/AppFoot.vue'\n    import options from '../common/country-data.js'\n\n    export default {\n        name: \"release\",\n        components: {\n            AppHead,\n            AppBody,\n            AppFoot\n        },\n        data() {\n            return {\n                imgDialogVisible:false,\n                dialogImageUrl:'',\n                showFileList:true,\n                options:options,\n                selectedOptions:[],\n                options2: [],\n                imgList:[],\n                idleItemInfo:{\n                    idleName:'',\n                    idleDetails:'',\n                    pictureList:'',\n                    idlePrice:0,\n                    idlePlace:'',\n                    idleLabel:''\n                }\n            };\n        },\n        methods: {\n            listType() {\n                this.$api.listType({begin : 0, size : 999}).then((res) => {\n                    for(var i = 0; i < res.data.length; ++i) {\n\n                        this.options2.push({\n                            value : res.data[i].id,\n                            label : res.data[i].name\n                        })\n                    }\n                })\n            },\n            handleChange(value) {\n                console.log(value);\n                this.idleItemInfo.idlePlace=value[1];\n            },\n            fileHandleRemove(file, fileList) {\n                console.log(file, fileList);\n                for(let i=0;i<this.imgList.length;i++){\n                    if(this.imgList[i]===file.response.data){\n                        this.imgList.splice(i,1);\n                    }\n                }\n            },\n            fileHandlePreview(file) {\n                console.log(file);\n                this.dialogImageUrl=file.response.data;\n                this.imgDialogVisible=true;\n            },\n            fileHandleSuccess(response, file, fileList){\n                console.log(\"file:\",response,file,fileList);\n                this.imgList.push(response.data);\n            },\n            releaseButton(){\n                this.idleItemInfo.pictureList=JSON.stringify(this.imgList);\n                console.log(this.idleItemInfo);\n                if(this.idleItemInfo.idleName&&\n                    this.idleItemInfo.idleDetails&&\n                    this.idleItemInfo.idlePlace&&\n                    this.idleItemInfo.idleLabel&&\n                    this.idleItemInfo.idlePrice){\n                    this.$api.addIdleItem(this.idleItemInfo).then(res=>{\n                        if (res.status_code === 1) {\n                            this.$message({\n                                message: '发布成功！',\n                                type: 'success'\n                            });\n                            console.log(res.data);\n                            this.$router.replace({path: '/details', query: {id: res.data.id}});\n                        } else {\n                            this.$message.error('发布失败！'+res.msg);\n                        }\n                    }).catch(e=>{\n                        this.$message.error('请填写完整信息');\n                    })\n                }else {\n                    this.$message.error('请填写完整信息！');\n                }\n\n            },\n            handleExceed(files, fileList) {\n                this.$message.warning(`限制10张图片，本次选择了 ${files.length} 张图，共选择了 ${files.length + fileList.length} 张图`);\n            },\n        },\n        mounted() {\n            this.listType()\n        }\n    }\n</script>\n\n<style scoped>\n    .release-idle-container {\n        min-height: 85vh;\n    }\n\n    .release-idle-container-title {\n        font-size: 18px;\n        padding: 30px 0;\n        font-weight: 600;\n        width: 100%;\n        text-align: center;\n    }\n\n    .release-idle-container-form {\n        padding: 0 180px;\n    }\n\n    .release-idle-detiles-text {\n        margin: 20px 0;\n    }\n    .release-idle-place{\n        margin-bottom: 15px;\n    }\n    .release-tip{\n        color: #555555;\n        float: left;\n        padding-right: 5px;\n        height: 36px;\n        line-height: 36px;\n        font-size: 14px;\n    }\n    .release-idle-container-picture{\n        width: 500px;\n        height: 400px;\n        margin: 20px 0;\n\n    }\n    .release-idle-container-picture-title{\n        margin: 10px 0;\n        color: #555555;\n        font-size: 14px;\n    }\n    .picture-list {\n        margin: 20px 0;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        height: 100px;\n    }\n</style>"]}]}